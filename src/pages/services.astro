---
import BaseLayout from '../layouts/BaseLayout.astro';
import servicesData from '../data/services.json';
import siteData from '../data/site.json';
import themeData from '../data/theme.json';

const pageTitle = `Services & Consulting | ${siteData.name}`;
const { intro, services, engagement_models } = servicesData;

// Sort services by order
const sortedServices = services.sort((a, b) => (a.order || 999) - (b.order || 999));
---

<BaseLayout title={pageTitle}>
  <section class="container mt-8">
    <h1 class="mb-8">Services</h1>
    <p class="intro">
      {intro}
    </p>

    <div class="services-grid" style={`grid-template-columns: repeat(${themeData.layout.grid?.serviceColumns || 3}, 1fr);`}>
      {sortedServices.map(service => (
          <div class="service-card">
            <h3>{service.title}</h3>
            <p>{service.description}</p>
            {service.points && (
                <ul class="service-points">
                    {service.points.map(point => (
                        <li>{point}</li>
                    ))}
                </ul>
            )}
          </div>
      ))}
    </div>

    <h2 class="mt-8">Engagement Models</h2>
    <div class="engagement-grid">
        {engagement_models.map(model => (
            <div class="engagement-item">
                <h4>{model.title}</h4>
                <p>{model.description}</p>
            </div>
        ))}
    </div>

    <div class="cta-box">
        <h3>Ready to upgrade your data infrastructure?</h3>
        <p>Let's discuss how I can help you achieve your data goals.</p>
        <a href="/contact" class="btn">Get in Touch</a>
    </div>

  </section>
</BaseLayout>

<style>
  .intro {
    max-width: var(--max-width);
    margin-bottom: var(--space-lg);
    font-size: 1.1rem;
  }
  .services-grid {
    display: grid;
    /* grid-template-columns handled inline for configuration */
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
  }
  .service-card {
    background: var(--color-bg-secondary);
    padding: var(--space-lg);
    border-radius: 8px;
    border: 1px solid var(--color-border);
  }
  .service-card h3 {
    color: var(--color-accent);
    margin-top: 0;
  }
  .service-points {
    list-style: none;
    padding: 0;
    margin-top: var(--space-md);
  }
  .service-points li {
    position: relative;
    padding-left: 1.25rem;
    margin-bottom: 0.5rem;
    color: var(--color-text-muted);
    font-size: 0.95rem;
  }
  .service-points li::before {
    content: "â€¢";
    position: absolute;
    left: 0;
    color: var(--color-accent);
    font-weight: bold;
  }
  .engagement-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
  }
  .engagement-item {
    border: 1px solid var(--color-border);
    padding: var(--space-md);
    border-radius: 8px;
  }
  .engagement-item h4 {
    margin-top: 0;
    color: var(--color-text-main);
  }
  .cta-box {
    text-align: center;
    background: var(--color-bg-secondary);
    padding: var(--space-xl);
    border-radius: 12px;
    border: 1px solid var(--color-border);
  }
</style>
